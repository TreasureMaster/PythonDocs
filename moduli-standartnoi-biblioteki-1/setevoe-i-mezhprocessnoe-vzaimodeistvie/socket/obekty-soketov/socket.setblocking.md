# socket.setblocking \(\)

### socket.setblocking \( _flag_ \)

Устанавливает блокирующий или неблокирующий режим сокета: если флаг _**flag**_ установлен в `false`, сокет установлен в неблокирующий режим, в противном случае - в режим блокировки.

Этот метод является сокращением для некоторых вызовов [settimeout \(\)](socket.settimeout.md):

* `sock.setblocking (True)` эквивалентно `sock.settimeout (None)`
* `sock.setblocking (False)` эквивалентно `sock.settimeout (0.0)`

_Изменено в версии 3.7:_ метод больше не применяет флаг [SOCK\_NONBLOCK](../konstanty-soketov/socket.sock_nonblock.md) к [socket.type](socket.type.md).

{% hint style="success" %}
_Неблокирующие сокеты._ Функция select гарантирует, что вызовы методов сокетов, таких как accept и recv, не будут блокировать \(приостанавливать\) вызывающую программу, но в языке Python есть также возможность сделать сокеты неблокирующими в целом. С помощью метода setblocking \(\) объектов сокетов они устанавливаются в блокирующий или неблокирующий режим. Например, после вызова socket.setblocking \(flag\) сокет устанавливается в неблокирующий режим, если flag равен нулю, и в блокирующий режим - в противном случае. Все сокеты изначально открываются в блокирующем режиме, поэтому вызовы методов сокетов всегда могут привести к приостановке вызывающей программы.

Но при работе в неблокирующем режиме, когда метод recv не находит данных или метод send не может немедленно передать данные, возбуждается исключение socket.error. Сценарий может перехватить это исключение, чтобы определить, готов ли сокет к обработке. В блокирующем режиме эти методы всегда блокируют вызывающую программу, пока не смогут продолжить работу. Конечно, обработка запроса клиента может не ограничиваться пересылкой данных \(обработка запроса может потребовать длительных расчетов\), поэтому неблокирующий сокеты не гарантируют отсутствие задержки на сервере в целом. Они лишь предоставляют еще один способ реализации серверов с мультиплексированием. Подобно select они лучше подходят для случаев, когда запросы клиентов могут обслуживаться быстро.
{% endhint %}

